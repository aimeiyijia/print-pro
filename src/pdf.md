## 纯前端导出pdf

## 插件依赖
```js
npm install html2canvas
npm install jspdf

```
### 场景
 分页截断问题, 页眉页脚, 页边距, 清晰度等


待测试：
1. cavans最长限制


## 使用

 引入html2Pdf类,其余两个文件是我参考时候的,我自己重新封装了一遍,然后看这个文件的参数就知道了,或者看看使用案例.

## 注意点：

1. pdf.addImage是以当前页算的坐标，也就是像页眉每页添加时候左上角坐标开始都是0，0，而不是加上前面的页数,所以看原理时候不要理解错了.

2. 内部滚动条导致滚动部分被截断问题
  当表格列数过多，表格内部产生滚动条，直接导出的话滚动条外是被截掉的，其实不管是表格还是其他组件，内部产生滚动条都是会被截掉的。

  解决方案1：
  尽量不要产生内部滚动条，如果避免不了，那么可以考虑导出时候将样式更改，把宽度加大到不出现滚动条，同时可以考虑将页面方向换成横向，不然可能在pdf中字看起来过小。这个方案缺点是导出时候页面会看起来突然变宽了，不过可以加loading蒙版遮蔽一下。

  决方案2：
  如果不想导出时候更换样式，可以考虑渲染多一个，设置定位不可见，这个宽度就设置不出现滚动条为止，不过这样要多渲染，性能可能有点影响，内容多的话。

  不管哪个，目的都是导出时候不让内部产生滚动条！。

3. 导出内容过多，后面页面全是空白或者黑色
   这个是浏览器限制canvas最大绘制长度问题，不同浏览器有些不一样。

   解决：

4. 图片在pdf显示不出
   出现这个，那么就是画布被污染导致绘制失败，除了配置html2canvas设置可跨域加载图片外，同时要看这个图片链接本身是否开启了跨域访问，需要允许才可以。

   当然，base64的图片不会出现这种问题，如果图片小，可以先转成basse64解决。

5. 目前代码节点遍历,并未考虑节点dom定位、边距、边框等因素，需在dom里自行考虑，如将box-sizing设置为border-box


 参考来源:
1.  掘金： https://juejin.cn/post/7138370283739545613

2.  jsPDF - Documentation (artskydj.github.io)

3. 配置型 | HTML2CANVAS 中文文档 (allenchinese.github.io)

4. 【原创】jspdf+html2canvas生成多页pdf防截断处理 - 简书 (jianshu.com)